<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comunidad - UniProjects</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        .chat-container {
            height: 500px;
            overflow-y: auto;
        }

        .forum-post {
            transition: background-color 0.3s ease;
        }

        .forum-post:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .ai-message {
            background-color: #e6f2ff;
        }
    </style>
</head>

<body>
    <div class="container mt-5">
        <h1>Comunidad UniProjects</h1>

        <!-- Sección de Foros -->
        <div class="row mt-4">
            <div class="col-md-8">
                <h3>Foros de Discusión</h3>
                <div id="forumPosts">
                    <!-- Posts de foro se cargarán dinámicamente -->
                </div>

                <!-- Crear Nuevo Post -->
                <div class="mt-4">
                    <h4>Crear Nuevo Post</h4>
                    <form id="newPostForm">
                        <div class="mb-3">
                            <input type="text" class="form-control" id="postTitle" placeholder="Título del Post"
                                required>
                        </div>
                        <div class="mb-3">
                            <textarea class="form-control" id="postContent" rows="4" placeholder="Contenido del Post"
                                required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Publicar</button>
                    </form>
                </div>
            </div>

            <!-- Chat en Tiempo Real -->
            <div class="col-md-4">
                <h3>Chat en Tiempo Real</h3>
                <div class="card">
                    <div class="card-body chat-container" id="chatMessages">
                        <!-- Mensajes de chat se cargarán aquí -->
                    </div>
                    <div class="card-footer">
                        <div class="input-group">
                            <input type="text" class="form-control" id="chatInput" placeholder="Escribe un mensaje...">
                            <button class="btn btn-primary" id="sendMessageBtn">Enviar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Gestión de Foros
        const forumPosts = document.getElementById('forumPosts');
        const newPostForm = document.getElementById('newPostForm');

        const sampleForumPosts = [
            {
                title: 'Mejores Prácticas en Proyectos de Tecnología',
                content: 'Compartamos consejos y estrategias para desarrollar proyectos tecnológicos innovadores.',
                author: 'María Rodríguez',
                date: '2024-03-20'
            },
            {
                title: 'Desafíos de la Investigación Interdisciplinaria',
                content: 'Discutamos los retos de trabajar en proyectos que cruzan múltiples disciplinas.',
                author: 'Carlos González',
                date: '2024-03-18'
            }
        ];

        function renderForumPosts() {
            forumPosts.innerHTML = sampleForumPosts.map(post => `
                <div class="card mb-3 forum-post">
                    <div class="card-body">
                        <h5 class="card-title">${post.title}</h5>
                        <h6 class="card-subtitle mb-2 text-muted">${post.author} - ${post.date}</h6>
                        <p class="card-text">${post.content}</p>
                        <button class="btn btn-sm btn-outline-primary">Responder</button>
                    </div>
                </div>
            `).join('');
        }

        newPostForm.addEventListener('submit', function (e) {
            e.preventDefault();
            const newPost = {
                title: document.getElementById('postTitle').value,
                content: document.getElementById('postContent').value,
                author: 'Usuario Actual',
                date: new Date().toISOString().split('T')[0]
            };
            sampleForumPosts.unshift(newPost);
            renderForumPosts();
            newPostForm.reset();
        });

        renderForumPosts();

        // Chat en Tiempo Real con IA
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const sendMessageBtn = document.getElementById('sendMessageBtn');

        const aiResponses = [
            'Interesante punto de vista, ¿podrías elaborar más?',
            'Esa es una excelente pregunta. Consideremos diferentes perspectivas.',
            'Me gustaría ayudarte a profundizar en ese tema.',
            'Encontré algunos recursos relevantes que podrían interesarte.'
        ];

        function addMessage(message, type = 'user') {
            const messageElement = document.createElement('div');
            messageElement.classList.add('mb-2');

            if (type === 'ai') {
                messageElement.classList.add('ai-message', 'p-2', 'rounded');
                messageElement.innerHTML = `<strong>IA UniProjects:</strong> ${message}`;
            } else {
                messageElement.innerHTML = `<strong>Tú:</strong> ${message}`;
            }

            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function generateAIResponse() {
            const randomResponse = aiResponses[Math.floor(Math.random() * aiResponses.length)];
            addMessage(randomResponse, 'ai');
        }

        sendMessageBtn.addEventListener('click', function () {
            const message = chatInput.value.trim();
            if (message) {
                addMessage(message);
                chatInput.value = '';

                // Simular respuesta de IA con un pequeño retraso
                setTimeout(generateAIResponse, 1000);
            }
        });

        chatInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                sendMessageBtn.click();
            }
        });
    </script>
</body>

</html>